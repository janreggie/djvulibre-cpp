\hypertarget{classDjVuSimplePort}{}\doxysection{Dj\+Vu\+Simple\+Port Class Reference}
\label{classDjVuSimplePort}\index{DjVuSimplePort@{DjVuSimplePort}}


{\ttfamily \#include $<$Dj\+Vu\+Port.\+h$>$}



Inheritance diagram for Dj\+Vu\+Simple\+Port\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{classDjVuSimplePort__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Dj\+Vu\+Simple\+Port\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{classDjVuSimplePort__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classGP}{GP}}$<$ \mbox{\hyperlink{classDataPool}{Data\+Pool}} $>$ \mbox{\hyperlink{classDjVuSimplePort_a2b5c6f47728d2e3df8bfd8d10ccf1f6d}{request\+\_\+data}} (const \mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}} $\ast$source, const \mbox{\hyperlink{classGURL}{G\+U\+RL}} \&url)
\item 
\mbox{\Hypertarget{classDjVuSimplePort_af9009b4084a85b99cb969c96aa90c5d4}\label{classDjVuSimplePort_af9009b4084a85b99cb969c96aa90c5d4}} 
virtual bool \mbox{\hyperlink{classDjVuSimplePort_af9009b4084a85b99cb969c96aa90c5d4}{notify\+\_\+error}} (const \mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}} $\ast$source, const \mbox{\hyperlink{classGUTF8String}{G\+U\+T\+F8\+String}} \&msg)
\begin{DoxyCompactList}\small\item\em Displays error on \#stderr\#. Always returns 1. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classDjVuSimplePort_a430d0f5fd8eb8c4f820d83079d123379}\label{classDjVuSimplePort_a430d0f5fd8eb8c4f820d83079d123379}} 
virtual bool \mbox{\hyperlink{classDjVuSimplePort_a430d0f5fd8eb8c4f820d83079d123379}{notify\+\_\+status}} (const \mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}} $\ast$source, const \mbox{\hyperlink{classGUTF8String}{G\+U\+T\+F8\+String}} \&msg)
\begin{DoxyCompactList}\small\item\em Displays status on \#stderr\#. Always returns 1. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Dj\+Vu\+Port.\+h}\par
{\em Files \#\char`\"{}\+Dj\+Vu\+Port.\+h\char`\"{}\# and \#\char`\"{}\+Dj\+Vu\+Port.\+cpp\char`\"{}\# implement a communication mechanism between different parties involved in decoding Dj\+Vu files. It should be pretty clear that the creator of \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuDocument}{Dj\+Vu\+Document}}\} and \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuFile}{Dj\+Vu\+File}}\} would like to receive some information about the progress of decoding, errors occurred, etc. It may also want to provide source data for decoders (like it\textquotesingle{}s done in the plugin where the real data is downloaded from the net and is fed into Dj\+Vu decoders).

Normally this functionality is implemented by means of callbacks which are run when a given condition comes true. Unfortunately it\textquotesingle{}s not quite easy to implement this strategy in our case. The reason is that there may be more than one \char`\"{}client\char`\"{} working with the same document, and the document should send the information to each of the clients. This could be done by means of callback \{{\itshape lists\}}, of course, but we want to achieve more bulletproof results\+: we want to be sure that the client that we\textquotesingle{}re about to contact is still alive, and is not being destroyed by another thread. Besides, we are going to call these \char`\"{}callbacks\char`\"{} from many places, from many different classes. Maintaining multi-\/thread safe callback lists is very difficult.

Finally, we want to provide some default implementation of these \char`\"{}callbacks\char`\"{} in the library, which should attempt to process the requests themselves if they can, and contact the client only if they\textquotesingle{}re unable to do it (like in the case of \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPort_a3209546237c836dc716d852fd6219add}{Dj\+Vu\+Port\+::request\+\_\+data}}\}() with local U\+RL where \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuDocument}{Dj\+Vu\+Document}}\} can get the data from the hard drive itself not disturbing the document\textquotesingle{}s creator.

Two classes implement a general communication mechanism\+: \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}}\} and \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPortcaster}{Dj\+Vu\+Portcaster}}\}. Any sender and recipient of requests should be a subclass of \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}}\}. \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPortcaster}{Dj\+Vu\+Portcaster}}\} maintains a map of routes between \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}}\}s, which should be configured by somebody else. Whenever a port wants to send a request, it calls the corresponding function of \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPortcaster}{Dj\+Vu\+Portcaster}}\}, and the portcaster relays the request to all the destinations that it sees in the internal map.

The \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuPortcaster}{Dj\+Vu\+Portcaster}}\} is responsible for keeping the map up to date by getting rid of destinations that have been destroyed. Map updates are performed from a single place and are serialized by a global monitor.

@memo Dj\+Vu decoder communication mechanism. \begin{DoxyAuthor}{Author}
Andrei Erofeev \href{mailto:eaf@geocities.com}{\texttt{ eaf@geocities.\+com}}\textbackslash{} L\textbackslash{}\textquotesingle{}eon Bottou \href{mailto:leonb@research.att.com}{\texttt{ leonb@research.\+att.\+com}} 
\end{DoxyAuthor}
}\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classDjVuSimplePort_a4844783c321e79bc7d0cf4d3b99297ff}\label{classDjVuSimplePort_a4844783c321e79bc7d0cf4d3b99297ff}} 
virtual bool \mbox{\hyperlink{classDjVuSimplePort_a4844783c321e79bc7d0cf4d3b99297ff}{inherits}} (const \mbox{\hyperlink{classGUTF8String}{G\+U\+T\+F8\+String}} \&class\+\_\+name) const
\begin{DoxyCompactList}\small\item\em Returns 1 if \#class\+\_\+name\# is \#\char`\"{}\+Dj\+Vu\+Port\char`\"{}\# or \#\char`\"{}\+Dj\+Vu\+Simple\+Port\char`\"{}\#. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Simple port. ~\newline
 An instance of \mbox{\hyperlink{classDjVuSimplePort}{Dj\+Vu\+Simple\+Port}}\# is automatically created when you create a \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuFile}{Dj\+Vu\+File}}\} or a \textbackslash{}\+Ref\{\mbox{\hyperlink{classDjVuDocument}{Dj\+Vu\+Document}}\} without specifying a port. This simple port can retrieve data for local urls (i.\+e. urls referring to local files) and display error messages on \#stderr\#. All other notifications are ignored. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classDjVuSimplePort_a2b5c6f47728d2e3df8bfd8d10ccf1f6d}\label{classDjVuSimplePort_a2b5c6f47728d2e3df8bfd8d10ccf1f6d}} 
\index{DjVuSimplePort@{DjVuSimplePort}!request\_data@{request\_data}}
\index{request\_data@{request\_data}!DjVuSimplePort@{DjVuSimplePort}}
\doxysubsubsection{\texorpdfstring{request\_data()}{request\_data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGP}{GP}}$<$ \mbox{\hyperlink{classDataPool}{Data\+Pool}} $>$ Dj\+Vu\+Simple\+Port\+::request\+\_\+data (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classDjVuPort}{Dj\+Vu\+Port}} $\ast$}]{source,  }\item[{const \mbox{\hyperlink{classGURL}{G\+U\+RL}} \&}]{url }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

If \#url\# is local, it created a \textbackslash{}\+Ref\{\mbox{\hyperlink{classDataPool}{Data\+Pool}}\}, connects it to the file with the given name and returns. Otherwise returns \#0\#. 

Reimplemented from \mbox{\hyperlink{classDjVuPort_a3209546237c836dc716d852fd6219add}{Dj\+Vu\+Port}}.



Reimplemented in \mbox{\hyperlink{classDjVuErrorList_ab69d64d11c26a81f469d1664f584e518}{Dj\+Vu\+Error\+List}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libdjvu/Dj\+Vu\+Port.\+h\item 
libdjvu/Dj\+Vu\+Port.\+cpp\end{DoxyCompactItemize}
