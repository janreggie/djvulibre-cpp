\hypertarget{classGSafeFlags}{}\doxysection{G\+Safe\+Flags Class Reference}
\label{classGSafeFlags}\index{GSafeFlags@{GSafeFlags}}


{\ttfamily \#include $<$G\+Threads.\+h$>$}



Inheritance diagram for G\+Safe\+Flags\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=152pt]{classGSafeFlags__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for G\+Safe\+Flags\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=152pt]{classGSafeFlags__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& \mbox{\hyperlink{classGSafeFlags_ac15bc1dba69f81317441cf4d53b37a90}{operator=}} (long flags)
\item 
\mbox{\hyperlink{classGSafeFlags_a14abbf6046b144be4be9f38564927c9e}{operator long}} (void) const
\item 
bool \mbox{\hyperlink{classGSafeFlags_a286fe8164d55c835fe086e933e0ac0ea}{test\+\_\+and\+\_\+modify}} (long set\+\_\+mask, long clr\+\_\+mask, long set\+\_\+mask1, long clr\+\_\+mask1)
\item 
void \mbox{\hyperlink{classGSafeFlags_a58eee150e6b68facf7cc8b3924a84526}{wait\+\_\+and\+\_\+modify}} (long set\+\_\+mask, long clr\+\_\+mask, long set\+\_\+mask1, long clr\+\_\+mask1)
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ G\+Threads.\+h}\par
{\em Files \#\char`\"{}\+G\+Threads.\+h\char`\"{}\# and \#\char`\"{}\+G\+Threads.\+cpp\char`\"{}\# implement common entry points for multithreading on multiple platforms. Each execution thread is represented by an instance of class \textbackslash{}\+Ref\{\mbox{\hyperlink{classGThread}{G\+Thread}}\}. Synchronization is provided by class \textbackslash{}\+Ref\{\mbox{\hyperlink{classGMonitor}{G\+Monitor}}\} which implements a monitor (C.\+A.\+R Hoare, Communications of the A\+CM, 17(10), 1974).

@memo Portable threads \begin{DoxyAuthor}{Author}
L\textbackslash{}\textquotesingle{}eon Bottou \href{mailto:leonb@research.att.com}{\texttt{ leonb@research.\+att.\+com}} -- initial implementation.\textbackslash{} Praveen Guduru \href{mailto:praveen@sanskrit.lz.att.com}{\texttt{ praveen@sanskrit.\+lz.\+att.\+com}} -- mac implementation.
\end{DoxyAuthor}
From\+: Leon Bottou, 1/31/2002 Almost unchanged by Lizardtech. \mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} should go because it not as safe as it claims. Reduced to only W\+I\+N\+T\+H\+R\+E\+A\+DS and P\+O\+S\+I\+X\+T\+H\+R\+E\+A\+DS around djvulibre-\/3.\+5.\+25 }\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classGSafeFlags_a8457cf332e22ea334b0d9c56f633c79e}\label{classGSafeFlags_a8457cf332e22ea334b0d9c56f633c79e}} 
\mbox{\hyperlink{classGSafeFlags_a8457cf332e22ea334b0d9c56f633c79e}{G\+Safe\+Flags}} (long flags=0)
\begin{DoxyCompactList}\small\item\em Constructs \mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}}\# object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& \mbox{\hyperlink{classGSafeFlags_ab2341f86d5b8e9549ee2bab0371b321f}{operator$\vert$=}} (long mask)
\item 
\mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& \mbox{\hyperlink{classGSafeFlags_a7f13c3e8bf900b5cb763d2e1da078f4d}{operator\&=}} (long mask)
\item 
void \mbox{\hyperlink{classGSafeFlags_aed996d6e7c8a37c09209dc65e2abb30a}{wait\+\_\+for\+\_\+flags}} (long set\+\_\+mask, long clr\+\_\+mask=0) const
\item 
void \mbox{\hyperlink{classGSafeFlags_a30330e44549b384b778ffdd0bd9e2f98}{modify}} (long set\+\_\+mask, long clr\+\_\+mask)
\end{DoxyCompactItemize}
\end{Indent}


\doxysubsection{Detailed Description}
A thread safe class representing a set of flags. The flags are protected by \textbackslash{}\+Ref\{\mbox{\hyperlink{classGMonitor}{G\+Monitor}}\}, which is attempted to be locked whenever somebody accesses the flags. One can modify the class contents using one of two functions\+: \textbackslash{}\+Ref\{test\+\_\+and\+\_\+modify\}() and \textbackslash{}\+Ref\{wait\+\_\+and\+\_\+modify\}(). Both of them provide atomic operation of testing (first) and modification (second). The flags remain locked between the moment of testing and modification, which guarantees, that their state cannot be changed in between of these operations. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classGSafeFlags_a30330e44549b384b778ffdd0bd9e2f98}\label{classGSafeFlags_a30330e44549b384b778ffdd0bd9e2f98}} 
\index{GSafeFlags@{GSafeFlags}!modify@{modify}}
\index{modify@{modify}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{modify()}{modify()}}
{\footnotesize\ttfamily void G\+Safe\+Flags\+::modify (\begin{DoxyParamCaption}\item[{long}]{set\+\_\+mask,  }\item[{long}]{clr\+\_\+mask }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Modifies the flags by setting all bits mentioned in \#set\+\_\+mask\# and clearing all bits mentioned in \#clr\+\_\+mask\#. If the flags have actually been modified, a broadcast will be sent. \mbox{\Hypertarget{classGSafeFlags_a14abbf6046b144be4be9f38564927c9e}\label{classGSafeFlags_a14abbf6046b144be4be9f38564927c9e}} 
\index{GSafeFlags@{GSafeFlags}!operator long@{operator long}}
\index{operator long@{operator long}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{operator long()}{operator long()}}
{\footnotesize\ttfamily G\+Safe\+Flags\+::operator long (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption}) const}

Returns the value of the flags \mbox{\Hypertarget{classGSafeFlags_a7f13c3e8bf900b5cb763d2e1da078f4d}\label{classGSafeFlags_a7f13c3e8bf900b5cb763d2e1da078f4d}} 
\index{GSafeFlags@{GSafeFlags}!operator\&=@{operator\&=}}
\index{operator\&=@{operator\&=}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{operator\&=()}{operator\&=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& G\+Safe\+Flags\+::operator\&= (\begin{DoxyParamCaption}\item[{long}]{mask }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Modifies the flags by A\+N\+Ding them with the provided mask. A broadcast will be sent after the modification is done. \mbox{\Hypertarget{classGSafeFlags_ac15bc1dba69f81317441cf4d53b37a90}\label{classGSafeFlags_ac15bc1dba69f81317441cf4d53b37a90}} 
\index{GSafeFlags@{GSafeFlags}!operator=@{operator=}}
\index{operator=@{operator=}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& G\+Safe\+Flags\+::operator= (\begin{DoxyParamCaption}\item[{long}]{flags }\end{DoxyParamCaption})}

Assignment operator. Will also wake up threads waiting for the flags to change. \mbox{\Hypertarget{classGSafeFlags_ab2341f86d5b8e9549ee2bab0371b321f}\label{classGSafeFlags_ab2341f86d5b8e9549ee2bab0371b321f}} 
\index{GSafeFlags@{GSafeFlags}!operator\texttt{"|}=@{operator\texttt{"|}=}}
\index{operator\texttt{"|}=@{operator\texttt{"|}=}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{operator\texttt{"|}=()}{operator|=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGSafeFlags}{G\+Safe\+Flags}} \& G\+Safe\+Flags\+::operator$\vert$= (\begin{DoxyParamCaption}\item[{long}]{mask }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Modifies the flags by O\+Ring them with the provided mask. A broadcast will be sent after the modification is done. \mbox{\Hypertarget{classGSafeFlags_a286fe8164d55c835fe086e933e0ac0ea}\label{classGSafeFlags_a286fe8164d55c835fe086e933e0ac0ea}} 
\index{GSafeFlags@{GSafeFlags}!test\_and\_modify@{test\_and\_modify}}
\index{test\_and\_modify@{test\_and\_modify}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{test\_and\_modify()}{test\_and\_modify()}}
{\footnotesize\ttfamily bool G\+Safe\+Flags\+::test\+\_\+and\+\_\+modify (\begin{DoxyParamCaption}\item[{long}]{set\+\_\+mask,  }\item[{long}]{clr\+\_\+mask,  }\item[{long}]{set\+\_\+mask1,  }\item[{long}]{clr\+\_\+mask1 }\end{DoxyParamCaption})}

If all bits mentioned in \#set\+\_\+mask\# are set in the flags and all bits mentioned in \#clr\+\_\+mask\# are cleared in the flags, it sets all bits from \#set\+\_\+mask1\# in the flags, clears all flags from \#clr\+\_\+mask1\# in the flags and returns \#\+T\+R\+UE\#. Otherwise returns \#\+F\+A\+L\+SE\#. \mbox{\Hypertarget{classGSafeFlags_a58eee150e6b68facf7cc8b3924a84526}\label{classGSafeFlags_a58eee150e6b68facf7cc8b3924a84526}} 
\index{GSafeFlags@{GSafeFlags}!wait\_and\_modify@{wait\_and\_modify}}
\index{wait\_and\_modify@{wait\_and\_modify}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{wait\_and\_modify()}{wait\_and\_modify()}}
{\footnotesize\ttfamily void G\+Safe\+Flags\+::wait\+\_\+and\+\_\+modify (\begin{DoxyParamCaption}\item[{long}]{set\+\_\+mask,  }\item[{long}]{clr\+\_\+mask,  }\item[{long}]{set\+\_\+mask1,  }\item[{long}]{clr\+\_\+mask1 }\end{DoxyParamCaption})}

Waits until all bits mentioned in \#set\+\_\+mask\# are set in the flags and all bits mentioned in \#clr\+\_\+flags\# are cleared in the flags. After that it sets bits from \#set\+\_\+mask1\# and clears bits from \#clr\+\_\+mask1\# in the flags. \mbox{\Hypertarget{classGSafeFlags_aed996d6e7c8a37c09209dc65e2abb30a}\label{classGSafeFlags_aed996d6e7c8a37c09209dc65e2abb30a}} 
\index{GSafeFlags@{GSafeFlags}!wait\_for\_flags@{wait\_for\_flags}}
\index{wait\_for\_flags@{wait\_for\_flags}!GSafeFlags@{GSafeFlags}}
\doxysubsubsection{\texorpdfstring{wait\_for\_flags()}{wait\_for\_flags()}}
{\footnotesize\ttfamily void G\+Safe\+Flags\+::wait\+\_\+for\+\_\+flags (\begin{DoxyParamCaption}\item[{long}]{set\+\_\+mask,  }\item[{long}]{clr\+\_\+mask = {\ttfamily 0} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Waits until all bits set in \#set\+\_\+mask\# are set in the flags and all bits mentioned in \#clr\+\_\+mask\# are cleared in the flags. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
libdjvu/G\+Threads.\+h\item 
libdjvu/G\+Threads.\+cpp\end{DoxyCompactItemize}
