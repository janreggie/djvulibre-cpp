<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: JB2Dict Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classJB2Dict-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">JB2Dict Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="JB2Image_8h_source.html">JB2Image.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for JB2Dict:</div>
<div class="dyncontent">
<div class="center"><img src="classJB2Dict__inherit__graph.png" border="0" usemap="#JB2Dict_inherit__map" alt="Inheritance graph"/></div>
<map name="JB2Dict_inherit__map" id="JB2Dict_inherit__map">
<area shape="rect" title=" " alt="" coords="17,80,86,107"/>
<area shape="rect" href="classJB2Image.html" title=" " alt="" coords="9,155,93,181"/>
<area shape="rect" href="classGPEnabled.html" title=" " alt="" coords="5,5,97,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for JB2Dict:</div>
<div class="dyncontent">
<div class="center"><img src="classJB2Dict__coll__graph.png" border="0" usemap="#JB2Dict_coll__map" alt="Collaboration graph"/></div>
<map name="JB2Dict_coll__map" id="JB2Dict_coll__map">
<area shape="rect" title=" " alt="" coords="17,412,86,439"/>
<area shape="rect" href="classGPEnabled.html" title=" " alt="" coords="5,5,97,32"/>
<area shape="rect" href="classGPBase.html" title=" " alt="" coords="85,95,157,121"/>
<area shape="rect" href="classGUTF8String.html" title=" " alt="" coords="73,323,177,349"/>
<area shape="rect" href="classGBaseString.html" title=" " alt="" coords="84,247,187,273"/>
<area shape="rect" href="classGP.html" title=" " alt="" coords="68,171,211,197"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict_1_1JB2Codec.html">JB2Codec</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a712caf092b0c92e4e60b3d69b03bc49a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a712caf092b0c92e4e60b3d69b03bc49a">init</a> (void)</td></tr>
<tr class="separator:a712caf092b0c92e4e60b3d69b03bc49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775b7bf757ef6d27a08a48d142f66c22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a775b7bf757ef6d27a08a48d142f66c22">set_inherited_dict</a> (const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt; &amp;dict)</td></tr>
<tr class="separator:a775b7bf757ef6d27a08a48d142f66c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a856635f4c0ad7d7a2665724ab94fdedb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classJB2Shape.html">JB2Shape</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a856635f4c0ad7d7a2665724ab94fdedb">get_shape</a> (const int shapeno)</td></tr>
<tr class="separator:a856635f4c0ad7d7a2665724ab94fdedb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bde41afee0df20650ca4bada53a82e3"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classJB2Shape.html">JB2Shape</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a3bde41afee0df20650ca4bada53a82e3">get_shape</a> (const int shapeno) const</td></tr>
<tr class="separator:a3bde41afee0df20650ca4bada53a82e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5fd10e58af3d0f7b6dc7f133abd719"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a9b5fd10e58af3d0f7b6dc7f133abd719">add_shape</a> (const <a class="el" href="classJB2Shape.html">JB2Shape</a> &amp;shape)</td></tr>
<tr class="separator:a9b5fd10e58af3d0f7b6dc7f133abd719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eab36838cf2bb58fb598f72401a023f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a1eab36838cf2bb58fb598f72401a023f">compress</a> (void)</td></tr>
<tr class="separator:a1eab36838cf2bb58fb598f72401a023f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafbd3d2d2d0109fb18ded3c43b1c41e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#aaafbd3d2d2d0109fb18ded3c43b1c41e">get_memory_usage</a> (void) const</td></tr>
<tr class="separator:aaafbd3d2d2d0109fb18ded3c43b1c41e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea5057d75c9392f333ae1de8950cb88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#afea5057d75c9392f333ae1de8950cb88">encode</a> (const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classByteStream.html">ByteStream</a> &gt; &amp;gbs) const</td></tr>
<tr class="separator:afea5057d75c9392f333ae1de8950cb88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e7b30720f49d75a5238c2930a6b441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a47e7b30720f49d75a5238c2930a6b441">decode</a> (const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classByteStream.html">ByteStream</a> &gt; &amp;gbs, JB2DecoderCallback *cb=0, void *arg=0)</td></tr>
<tr class="separator:a47e7b30720f49d75a5238c2930a6b441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">JB2Image.h</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Files #"JB2Image.h"# and #"JB2Image.cpp"# address the compression of bilevel images using the JB2 soft pattern matching scheme. These files provide the complete decoder and the decoder back-end. The JB2 scheme is optimized for images containing a large number of self-similar small components such as characters. Typical text images can be compressed into files 3 to 5 times smaller than with G4/MMR and 2 to 4 times smaller than with JBIG1.</p>
<p>{\bf JB2 and JBIG2} &mdash; JB2 has strong similarities with the forthcoming JBIG2 standard developed by the "ISO/IEC JTC1 SC29 Working Group 1" which is responsible for both the JPEG and JBIG standards. This is hardly surprising since JB2 was our own proposal for the JBIG2 standard and remained the only proposal for years. The full JBIG2 standard however is significantly more complex and slighlty less efficient than JB2 because it addresses a broader range of applications. Full JBIG2 compliance may be implemented in the future.</p>
<p>{\bf JB2 Images} &mdash; <a class="el" href="structClass.html">Class</a> \Ref{<a class="el" href="classJB2Image.html">JB2Image</a>} is the central data structure implemented here. A <a class="el" href="classJB2Image.html">JB2Image</a># is composed of an array of shapes and an array of blits. Each shape contains a small bitmap representing an elementary blob of ink, such as a character or a segment of line art. Each blit instructs the decoder to render a particular shape at a specified position in the image. Some compression is already achieved because several blits can refer to the same shape. A shape can also contain a pointer to a parent shape. Additional compression is achieved when both shapes are similar because each shape is encoded using the parent shape as a model. A #"O"# shape for instance could be a parent for both a #"C"# shape and a #"Q"# shape.</p>
<p>{\bf JB2 Dictionary} &mdash; <a class="el" href="structClass.html">Class</a> \Ref{<a class="el" href="classJB2Dict.html">JB2Dict</a>} is a peculiar kind of <a class="el" href="classJB2Image.html">JB2Image</a> which only contains an array of shapes. These shapes can be referenced from another JB2Dict/JB2Image. This is arranged by setting the `&lsquo;inherited dictionary&rsquo;' of a JB2Dict/JB2Image using function \Ref{<a class="el" href="classJB2Dict.html#a775b7bf757ef6d27a08a48d142f66c22">JB2Dict::set_inherited_dict</a>}. Several JB2Images can use shapes from a same <a class="el" href="classJB2Dict.html">JB2Dict</a> encoded separately. This is how several pages of a same document can share information.</p>
<p>{\bf Decoding JB2 data} &mdash; The first step for decoding JB2 data consists of creating an empty <a class="el" href="classJB2Image.html">JB2Image</a># object. Function \Ref{<a class="el" href="classJB2Image.html#ac108ac2e1f06336fc5ddaeeb36671a31">JB2Image::decode</a>} then reads the data and populates the <a class="el" href="classJB2Image.html">JB2Image</a># with the shapes and the blits. Function \Ref{<a class="el" href="classJB2Image.html#ab3b2661c41345ebd2eab536485f32763">JB2Image::get_bitmap</a>} finally produces an anti-aliased image.</p>
<p>{\bf Encoding JB2 data} &mdash; The first step for decoding JB2 data also consists of creating an empty <a class="el" href="classJB2Image.html">JB2Image</a># object. You must then use functions \Ref{<a class="el" href="classJB2Dict.html#a9b5fd10e58af3d0f7b6dc7f133abd719">JB2Image::add_shape</a>} and \Ref{<a class="el" href="classJB2Image.html#ad742868b21e3ffc2c912e00a2e9b67d4">JB2Image::add_blit</a>} to populate the <a class="el" href="classJB2Image.html">JB2Image</a># object. Function \Ref{<a class="el" href="classJB2Image.html#af2b2723be7c37a94d3ad67cd72a9bfc9">JB2Image::encode</a>} finally produces the JB2 data. Function <a class="el" href="classJB2Dict.html#afea5057d75c9392f333ae1de8950cb88">encode</a># sequentially encodes the blits and the necessary shapes. The compression ratio depends on several factors: \begin{itemize} \item Blits should reuse shapes as often as possible. \item Blits should be sorted in reading order because this facilitates the prediction of the blit coordinates. \item Shapes should be sorted according to the order of first appearance in the sequence of blits because this facilitates the prediction of the shape indices. \item Shapes should be compared to all previous shapes in the shape array. The shape parent pointer should be set to a suitable parent shape if such a parent shape exists. The parent shape should have almost the same size and the same pixels. \end{itemize} All this is quite easy to achieve in the case of an electronically produced document such as a DVI file or a PS file: we know what the characters are and where they are located. If you only have a scanned image however you must first locate the characters (connected component analysis) and cut the remaining pieces of ink into smaller blobs. Ordering the blits and matching the shapes is then an essentially heuristic process. Although the quality of the heuristics substantially effects the file size, misordering blits or mismatching shapes never effects the quality of the image. The last refinement consists in smoothing the shapes in order to reduce the noise and maximize the similarities between shapes.</p>
<p>{\bf JB2 extensions} &mdash; Two extensions of the JB2 encoding format have been introduced with DjVu files version 21. The first extension addresses the shared shape dictionaries. The second extension bounds the number of probability contexts used for coding numbers. Both extensions maintain backward compatibility with JB2 as described in the ICFDD proposal. A more complete discussion can be found in section \Ref{JB2 extensions for version 21.}.</p>
<p>{\bf References} \begin{itemize} \item Paul G. Howard : {<em>Text</em> image compression using soft pattern matching}, Computer Journal, volume 40:2/3, 1997. \item JBIG1 : \URL{<a href="http://www.jpeg.org/public/jbighomepage.htm">http://www.jpeg.org/public/jbighomepage.htm</a>}. \item JBIG2 draft : \URL{<a href="http://www.jpeg.org/public/jbigpt2.htm">http://www.jpeg.org/public/jbigpt2.htm</a>}. \item ICFDD Draft Proposed American National Standard, 1999-08-26. \end{itemize}</p>
<p>@memo Coding bilevel images with JB2. </p><dl class="section author"><dt>Author</dt><dd>Paul Howard <a href="#" onclick="location.href='mai'+'lto:'+'pgh'+'@r'+'ese'+'ar'+'ch.'+'at'+'t.c'+'om'; return false;">pgh@r<span style="display: none;">.nosp@m.</span>esea<span style="display: none;">.nosp@m.</span>rch.a<span style="display: none;">.nosp@m.</span>tt.c<span style="display: none;">.nosp@m.</span>om</a> &ndash; JB2 design\ L\'eon Bottou <a href="#" onclick="location.href='mai'+'lto:'+'leo'+'nb'+'@re'+'se'+'arc'+'h.'+'att'+'.c'+'om'; return false;">leonb<span style="display: none;">.nosp@m.</span>@res<span style="display: none;">.nosp@m.</span>earch<span style="display: none;">.nosp@m.</span>.att<span style="display: none;">.nosp@m.</span>.com</a> &ndash; this implementation</dd></dl>
<p>From: Leon Bottou, 1/31/2002 Lizardtech has split the corresponding cpp file into a decoder and an encoder. Only superficial changes. The meat is mine. </p>
</div></td></tr>
<tr class="memitem:a4b8243849e8ead3554ee4814ab1a9d0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a4b8243849e8ead3554ee4814ab1a9d0d">get_inherited_dict</a> (void) const</td></tr>
<tr class="separator:a4b8243849e8ead3554ee4814ab1a9d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5953a9782262be346ffc7b24c8fcb95f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a5953a9782262be346ffc7b24c8fcb95f">get_inherited_shape_count</a> (void) const</td></tr>
<tr class="separator:a5953a9782262be346ffc7b24c8fcb95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f5954f27d50fda95bbb55896fa38910"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a7f5954f27d50fda95bbb55896fa38910">get_shape_count</a> (void) const</td></tr>
<tr class="separator:a7f5954f27d50fda95bbb55896fa38910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classGPEnabled"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classGPEnabled')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classGPEnabled.html">GPEnabled</a></td></tr>
<tr class="memitem:a9e5f12f17477e448d1fc08e37cb9d2dd inherit pub_methods_classGPEnabled"><td class="memItemLeft" align="right" valign="top"><a id="a9e5f12f17477e448d1fc08e37cb9d2dd"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#a9e5f12f17477e448d1fc08e37cb9d2dd">~GPEnabled</a> ()</td></tr>
<tr class="memdesc:a9e5f12f17477e448d1fc08e37cb9d2dd inherit pub_methods_classGPEnabled"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor. <br /></td></tr>
<tr class="separator:a9e5f12f17477e448d1fc08e37cb9d2dd inherit pub_methods_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af197d1b7ec283031880818fd05fdd2f9 inherit pub_methods_classGPEnabled"><td class="memItemLeft" align="right" valign="top"><a id="af197d1b7ec283031880818fd05fdd2f9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#af197d1b7ec283031880818fd05fdd2f9">GPEnabled</a> ()</td></tr>
<tr class="memdesc:af197d1b7ec283031880818fd05fdd2f9 inherit pub_methods_classGPEnabled"><td class="mdescLeft">&#160;</td><td class="mdescRight">Null constructor. <br /></td></tr>
<tr class="separator:af197d1b7ec283031880818fd05fdd2f9 inherit pub_methods_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2875b20558241302927c11dea068b6a inherit pub_methods_classGPEnabled"><td class="memItemLeft" align="right" valign="top"><a id="ae2875b20558241302927c11dea068b6a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#ae2875b20558241302927c11dea068b6a">GPEnabled</a> (const <a class="el" href="classGPEnabled.html">GPEnabled</a> &amp;obj)</td></tr>
<tr class="memdesc:ae2875b20558241302927c11dea068b6a inherit pub_methods_classGPEnabled"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy construcotr. <br /></td></tr>
<tr class="separator:ae2875b20558241302927c11dea068b6a inherit pub_methods_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4604c98eff7df30c6071bacdbc6693aa inherit pub_methods_classGPEnabled"><td class="memItemLeft" align="right" valign="top"><a id="a4604c98eff7df30c6071bacdbc6693aa"></a>
<a class="el" href="classGPEnabled.html">GPEnabled</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#a4604c98eff7df30c6071bacdbc6693aa">operator=</a> (const <a class="el" href="classGPEnabled.html">GPEnabled</a> &amp;obj)</td></tr>
<tr class="memdesc:a4604c98eff7df30c6071bacdbc6693aa inherit pub_methods_classGPEnabled"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy operator. <br /></td></tr>
<tr class="separator:a4604c98eff7df30c6071bacdbc6693aa inherit pub_methods_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff96ec9203073e902735c5b6b1f650a0 inherit pub_methods_classGPEnabled"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#aff96ec9203073e902735c5b6b1f650a0">get_count</a> (void) const</td></tr>
<tr class="separator:aff96ec9203073e902735c5b6b1f650a0 inherit pub_methods_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a49ea7f215b3c02571e8e402ab3f29a7d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a49ea7f215b3c02571e8e402ab3f29a7d">create</a> (void)</td></tr>
<tr class="separator:a49ea7f215b3c02571e8e402ab3f29a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a6cbb253ff8271cafc54c496ae9fbd4a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGUTF8String.html">GUTF8String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJB2Dict.html#a6cbb253ff8271cafc54c496ae9fbd4a9">comment</a></td></tr>
<tr class="separator:a6cbb253ff8271cafc54c496ae9fbd4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ade14bc88a550e90aa4b39cdbef0fb708"><td class="memItemLeft" align="right" valign="top"><a id="ade14bc88a550e90aa4b39cdbef0fb708"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>JB2Codec</b></td></tr>
<tr class="separator:ade14bc88a550e90aa4b39cdbef0fb708"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classGPEnabled"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classGPEnabled')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classGPEnabled.html">GPEnabled</a></td></tr>
<tr class="memitem:aaeebfa533635d29cc70aaa3620678734 inherit pro_attribs_classGPEnabled"><td class="memItemLeft" align="right" valign="top"><a id="aaeebfa533635d29cc70aaa3620678734"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGPEnabled.html#aaeebfa533635d29cc70aaa3620678734">count</a></td></tr>
<tr class="memdesc:aaeebfa533635d29cc70aaa3620678734 inherit pro_attribs_classGPEnabled"><td class="mdescLeft">&#160;</td><td class="mdescRight">The reference counter. <br /></td></tr>
<tr class="separator:aaeebfa533635d29cc70aaa3620678734 inherit pro_attribs_classGPEnabled"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Dictionary of JB2 shapes. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9b5fd10e58af3d0f7b6dc7f133abd719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5fd10e58af3d0f7b6dc7f133abd719">&#9670;&nbsp;</a></span>add_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int JB2Dict::add_shape </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJB2Shape.html">JB2Shape</a> &amp;&#160;</td>
          <td class="paramname"><em>shape</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Appends a shape to the shape array. This function appends a copy of shape #shape# to the shape array and returns the subscript of the new shape. The subscript of the parent shape #shape.parent# must actually designate an already existing shape. </p>

</div>
</div>
<a id="a1eab36838cf2bb58fb598f72401a023f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eab36838cf2bb58fb598f72401a023f">&#9670;&nbsp;</a></span>compress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JB2Dict::compress </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compresses all shape bitmaps. This function reduces the memory required by the <a class="el" href="classJB2Image.html">JB2Image</a># by calling \Ref{<a class="el" href="classGBitmap.html#a5204ead23ad993af5c23653374cfdac6">GBitmap::compress</a>} on all shapes bitmaps. This function is best called after decoding a <a class="el" href="classJB2Image.html">JB2Image</a>#, because function \Ref{get_bitmap} can directly use the compressed bitmaps. <br  />
 </p>

</div>
</div>
<a id="a49ea7f215b3c02571e8e402ab3f29a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ea7f215b3c02571e8e402ab3f29a7d">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt; JB2Dict::create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default creator. Constructs an empty <a class="el" href="classJB2Dict.html">JB2Dict</a># object. You can then call the decoding function <a class="el" href="classJB2Dict.html#a47e7b30720f49d75a5238c2930a6b441">decode</a>#. You can also manually set the image size using <a class="el" href="classJB2Dict.html#a9b5fd10e58af3d0f7b6dc7f133abd719">add_shape</a>#. </p>

</div>
</div>
<a id="a47e7b30720f49d75a5238c2930a6b441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e7b30720f49d75a5238c2930a6b441">&#9670;&nbsp;</a></span>decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JB2Dict::decode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classByteStream.html">ByteStream</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>gbs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JB2DecoderCallback *&#160;</td>
          <td class="paramname"><em>cb</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decodes JB2 data from <a class="el" href="classByteStream.html">ByteStream</a> #bs#. This function decodes the image size and populates the shape and blit arrays. The callback function #cb# is called when the decoder determines that the <a class="el" href="classByteStream.html">ByteStream</a> data requires a shape dictionary which has not been set with \Ref{<a class="el" href="classJB2Dict.html#a775b7bf757ef6d27a08a48d142f66c22">JB2Dict::set_inherited_dict</a>}. The callback receives argument #arg# and must return a suitable dictionary which will be installed as the inherited dictionary. The callback should return null if no such dictionary is found. </p>

</div>
</div>
<a id="afea5057d75c9392f333ae1de8950cb88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea5057d75c9392f333ae1de8950cb88">&#9670;&nbsp;</a></span>encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JB2Dict::encode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classByteStream.html">ByteStream</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>gbs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encodes the <a class="el" href="classJB2Dict.html">JB2Dict</a> into <a class="el" href="classByteStream.html">ByteStream</a> #bs#. <br  />
 This function generates the JB2 data stream without any header. <br  />
 </p>

</div>
</div>
<a id="a4b8243849e8ead3554ee4814ab1a9d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8243849e8ead3554ee4814ab1a9d0d">&#9670;&nbsp;</a></span>get_inherited_dict()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt; JB2Dict::get_inherited_dict </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the inherited dictionary. </p>

</div>
</div>
<a id="a5953a9782262be346ffc7b24c8fcb95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5953a9782262be346ffc7b24c8fcb95f">&#9670;&nbsp;</a></span>get_inherited_shape_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JB2Dict::get_inherited_shape_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of inherited shapes. </p>

</div>
</div>
<a id="aaafbd3d2d2d0109fb18ded3c43b1c41e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaafbd3d2d2d0109fb18ded3c43b1c41e">&#9670;&nbsp;</a></span>get_memory_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int JB2Dict::get_memory_usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the total memory used by the <a class="el" href="classJB2Image.html">JB2Image</a>. The returned value is expressed in bytes. </p>

</div>
</div>
<a id="a856635f4c0ad7d7a2665724ab94fdedb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a856635f4c0ad7d7a2665724ab94fdedb">&#9670;&nbsp;</a></span>get_shape() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classJB2Shape.html">JB2Shape</a> &amp; JB2Dict::get_shape </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>shapeno</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a pointer to shape #shapeno#. The returned pointer directly points into the shape array. This pointer can be used for reading or writing the shape data. </p>

</div>
</div>
<a id="a3bde41afee0df20650ca4bada53a82e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bde41afee0df20650ca4bada53a82e3">&#9670;&nbsp;</a></span>get_shape() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classJB2Shape.html">JB2Shape</a> &amp; JB2Dict::get_shape </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>shapeno</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a constant pointer to shape #shapeno#. The returned pointer directly points into the shape array. This pointer can only be used for reading the shape data. </p>

</div>
</div>
<a id="a7f5954f27d50fda95bbb55896fa38910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5954f27d50fda95bbb55896fa38910">&#9670;&nbsp;</a></span>get_shape_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JB2Dict::get_shape_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the total number of shapes. Shape indices range from #0# to <a class="el" href="classJB2Dict.html#a7f5954f27d50fda95bbb55896fa38910">get_shape_count()</a>-1#. </p>

</div>
</div>
<a id="a712caf092b0c92e4e60b3d69b03bc49a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a712caf092b0c92e4e60b3d69b03bc49a">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JB2Dict::init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets the <a class="el" href="classJB2Image.html">JB2Image</a># object. This function reinitializes both the shape and the blit arrays. All allocated memory is freed. </p>

</div>
</div>
<a id="a775b7bf757ef6d27a08a48d142f66c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a775b7bf757ef6d27a08a48d142f66c22">&#9670;&nbsp;</a></span>set_inherited_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JB2Dict::set_inherited_dict </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGP.html">GP</a>&lt; <a class="el" href="classJB2Dict.html">JB2Dict</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dict</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the inherited dictionary. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6cbb253ff8271cafc54c496ae9fbd4a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cbb253ff8271cafc54c496ae9fbd4a9">&#9670;&nbsp;</a></span>comment</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGUTF8String.html">GUTF8String</a> JB2Dict::comment</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Comment string coded by JB2 file. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>libdjvu/<a class="el" href="JB2Image_8h_source.html">JB2Image.h</a></li>
<li>libdjvu/JB2EncodeCodec.cpp</li>
<li>libdjvu/JB2Image.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
